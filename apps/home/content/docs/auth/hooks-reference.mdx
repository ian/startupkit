---
title: useAuth Reference
description: Complete API reference for the useAuth hook
---

The `useAuth` hook provides authentication state and methods in client components.

## Import

```tsx twoslash
import { useAuth } from "@startupkit/auth"
```

## Basic Usage

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

export function MyComponent() {
  const {
    isAuthenticated,
    isLoading,
    user,
    logout,
    sendAuthCode,
    verifyAuthCode,
    googleAuth
  } = useAuth()
}
```

## Return Values

### isAuthenticated

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { isAuthenticated } = useAuth()
}
```

Whether the user is currently signed in.

```tsx
if (isAuthenticated) {
  return <Dashboard />
}
return <SignInPrompt />
```

### isLoading

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { isLoading } = useAuth()
}
```

Whether the auth state is being determined. Always check this before `isAuthenticated` to avoid flashing content.

```tsx
if (isLoading) {
  return <Skeleton />
}
if (!isAuthenticated) {
  return <SignIn />
}
```

### user

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { user } = useAuth()
}
```

The current user object. `null` if not authenticated, `undefined` while loading.

```tsx
interface User {
  id: string
  email: string
  name: string
  firstName?: string
  lastName?: string
  image?: string
  emailVerified: boolean
  createdAt: Date
  updatedAt: Date
}
```

Usage:

```tsx
if (user) {
  return <span>Welcome, {user.name}</span>
}
```

## Methods

### logout()

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { logout } = useAuth()
}
```

Signs out the current user and redirects to home.

```tsx
<button onClick={logout}>Sign Out</button>
```

Or with custom handling:

```tsx
const handleLogout = async () => {
  await logout()
  // Additional cleanup if needed
}
```

### sendAuthCode()

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { sendAuthCode } = useAuth()
}
```

Sends a one-time password to the specified email.

```tsx
const [email, setEmail] = useState("")

const handleSend = async () => {
  try {
    await sendAuthCode(email)
    // Show code input
  } catch (error) {
    // Handle error (invalid email, rate limited, etc.)
  }
}
```

### verifyAuthCode()

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { verifyAuthCode } = useAuth()
}
```

Verifies the OTP code and creates a session.

```tsx
const handleVerify = async () => {
  try {
    await verifyAuthCode(email, code)
    // User is now signed in, redirected automatically
  } catch (error) {
    // Invalid or expired code
  }
}
```

### googleAuth()

```tsx twoslash
"use client"

import { useAuth } from "@startupkit/auth"

function Example() {
  const { googleAuth } = useAuth()
}
```

Initiates Google OAuth sign-in flow.

```tsx
<button onClick={googleAuth}>
  Sign in with Google
</button>
```

## AuthProvider

The `useAuth` hook requires the `AuthProvider` wrapper:

```tsx title="app/providers.tsx"
"use client"

import { AuthProvider } from "@startupkit/auth"
import { authClient } from "@/lib/auth-client"

interface ProvidersProps {
  children: React.ReactNode
  user?: User
}

export function Providers({ children, user }: ProvidersProps) {
  return (
    <AuthProvider authClient={authClient} user={user}>
      {children}
    </AuthProvider>
  )
}
```

### AuthProvider Props

| Prop | Type | Description |
|------|------|-------------|
| `children` | `ReactNode` | Child components |
| `authClient` | `AuthClient` | Better Auth client instance |
| `user` | `User` | Initial user (from server) |
| `onIdentify` | `(user: User) => void` | Called when user signs in |
| `onReset` | `() => void` | Called on logout |

### Integration with Analytics

```tsx
<AuthProvider
  authClient={authClient}
  user={user}
  onIdentify={(user) => {
    // Identify user in analytics
    analytics.identify(user.id, {
      email: user.email,
      name: user.name
    })
  }}
  onReset={() => {
    // Reset analytics identity
    analytics.reset()
  }}
>
  {children}
</AuthProvider>
```

## TypeScript

### Custom User Type

Extend the user type with additional fields:

```tsx
interface CustomUser {
  id: string
  email: string
  name: string
  plan: "free" | "pro" | "enterprise"
  teamId: string
}

// In your component
const { user } = useAuth() as { user: CustomUser | null }
```

### Type Definitions

```tsx
interface AuthContextType {
  isAuthenticated: boolean
  isLoading: boolean
  user: User | null | undefined
  logout: () => Promise<void>
  sendAuthCode: (email: string) => Promise<void>
  verifyAuthCode: (email: string, code: string) => Promise<void>
  googleAuth: () => Promise<void>
}
```

## Common Patterns

### Protected Component

```tsx
"use client"

import { useAuth } from "@startupkit/auth"

export function ProtectedFeature() {
  const { isAuthenticated, isLoading } = useAuth()

  if (isLoading) return <Skeleton />
  if (!isAuthenticated) return null

  return <Feature />
}
```

### Auth-Dependent UI

```tsx
"use client"

import { useAuth } from "@startupkit/auth"

export function Header() {
  const { isAuthenticated, user, logout } = useAuth()

  return (
    <header>
      <Logo />
      <nav>
        {isAuthenticated ? (
          <>
            <span>{user?.name}</span>
            <button onClick={logout}>Sign Out</button>
          </>
        ) : (
          <a href="/sign-in">Sign In</a>
        )}
      </nav>
    </header>
  )
}
```

### Redirect After Auth

```tsx
"use client"

import { useAuth } from "@startupkit/auth"
import { useRouter } from "next/navigation"
import { useEffect } from "react"

export function AuthRedirect({ redirectTo = "/dashboard" }) {
  const { isAuthenticated, isLoading } = useAuth()
  const router = useRouter()

  useEffect(() => {
    if (!isLoading && isAuthenticated) {
      router.push(redirectTo)
    }
  }, [isAuthenticated, isLoading, redirectTo, router])

  return null
}
```

## Error Handling

All auth methods can throw errors. Always check the error type before accessing properties:

```tsx
try {
  await sendAuthCode(email)
} catch (error) {
  if (error instanceof Error) {
    const message = error.message
    if (message.includes("rate limit")) {
      setError("Too many attempts. Please wait.")
    } else if (message.includes("invalid email")) {
      setError("Please enter a valid email.")
    } else {
      setError("Something went wrong. Please try again.")
    }
  } else {
    setError("An unexpected error occurred.")
  }
}
```

## Next Steps

- [Email OTP setup](/docs/auth/email-otp) - Configure email authentication
- [Google OAuth setup](/docs/auth/google-oauth) - Configure social sign-in
- [Protecting routes](/docs/auth/protecting-routes) - Secure your pages
